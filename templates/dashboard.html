<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ダッシュボード - 猟友会管理システム</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-4">
        <!-- ヘッダー -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="mb-1">ダッシュボード</h1>
                <p class="text-muted mb-0">ようこそ、{{ user.name }}さん（{{ user.role }}）</p>
            </div>
            <div>
                <a href="/logout" class="btn btn-outline-danger">
                    <i class="bi bi-box-arrow-right"></i> ログアウト
                </a>
            </div>
        </div>

        <!-- メイン機能カード -->
        <div class="row g-4 mb-4">
            <!-- 報告登録 -->
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-file-earmark-plus text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">害獣駆除報告</h5>
                        <p class="card-text text-muted">新しい捕獲活動の報告を登録します</p>
                        <a href="/report/new" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> 新規報告
                        </a>
                    </div>
                </div>
            </div>

            <!-- 報告一覧・印刷 -->
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-list-ul text-success" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">報告一覧・印刷</h5>
                        <p class="card-text text-muted">登録済みの報告を確認・印刷します</p>
                        <a href="/reports" class="btn btn-success">
                            <i class="bi bi-printer"></i> 報告一覧
                        </a>
                    </div>
                </div>
            </div>

            <!-- 猟友会名簿管理 -->
            {% if user.role in ["editor", "admin"] %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-people text-info" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">猟友会名簿</h5>
                        <p class="card-text text-muted">メンバー情報の管理を行います</p>
                        <a href="/members/manage" class="btn btn-info">
                            <i class="bi bi-gear"></i> 名簿管理
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- CSV出力（管理者のみ） -->
            {% if user.role == "admin" %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-download text-warning" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">CSV出力</h5>
                        <p class="card-text text-muted">報告データをCSV形式で出力します</p>
                        <a href="/reports/export" class="btn btn-warning">
                            <i class="bi bi-file-earmark-spreadsheet"></i> CSV出力
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- ユーザー管理（管理者のみ） -->
            {% if user.role == "admin" %}
            <div class="col-md-6 col-lg-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-people text-danger" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">ユーザー管理</h5>
                        <p class="card-text text-muted">システムユーザーの管理・削除を行います</p>
                        <a href="/users/manage" class="btn btn-danger">
                            <i class="bi bi-gear"></i> ユーザー管理
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- システム情報 -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="bi bi-info-circle"></i> システム情報
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>ユーザー名:</strong> {{ user.name }}</p>
                                <p><strong>権限:</strong>
                                    {% if user.role == "admin" %}
                                    <span class="badge bg-danger">管理者</span>
                                    {% elif user.role == "editor" %}
                                    <span class="badge bg-warning">編集者</span>
                                    {% else %}
                                    <span class="badge bg-primary">報告者</span>
                                    {% endif %}
                                </p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>メールアドレス:</strong> {{ user.email }}</p>
                                <p><strong>最終ログイン:</strong> {{ current_time }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
